<!DOCTYPE html>
<html lang="vi">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Paws Pet House - Quản lý Thông tin khách hàng</title>
    <link rel="stylesheet" href="QLTTKH.css" />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css"
    />
  </head>

  <body>

    <div class="app-container">
      <!-- Nội dung phải -->
      <div class="content-area">
        <!-- BREADCRUMB + ADMIN -->
        <div class="topbar">
          <div class="breadcrumb">
            Trang chủ / <strong>Quản lý thông tin khách hàng</strong>
          </div>
          <div class="user-admin">
            <img src="https://cdn-icons-png.flaticon.com/512/847/847969.png" alt="Admin Avatar" class="avatar">
            <span>Admin</span>
          </div>
        </div>

        <!-- Table Container -->
        <div class="table-container">
          <h3 class="table-title">DANH SÁCH THÔNG TIN KHÁCH HÀNG</h3>
          <div class="table-toolbar">
            <div class="toolbar-left">
              <div class="search-group">
                <input type="text" placeholder="Tìm kiếm" class="search-box" />
                <button class="search-button">
                  <i class="fas fa-search"></i>
                </button>
              </div>
              <button class="filter-button">
                <i class="fas fa-filter"></i> Bộ lọc
                <i class="fas fa-caret-down"></i>
              </button>
            </div>
            <button class="add-button">
              <i class="fas fa-plus white-icon"></i>
              Thêm mới
            </button>
          </div>

          <table class="data-table">
            <thead>
              <tr>
                <th></th>
                <th>Mã khách hàng</th>
                <th>Tên khách hàng</th>
                <th>Mã tài khoản</th>
                <th>Giới tính</th>
                <th>Địa chỉ</th>
                <th>SĐT</th>
                <th>Tác vụ</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td><input type="checkbox" /></td>
                <td>KH001</td>
                <td>Nguyễn Thị A</td>
                <td>TK001</td>
                <td>0</td>
                <td>123 Lê Lợi, Quận 1, TP.HCM</td>
                <td>0901234567</td>
                <td>
                  <button class="icon-button edit-button">
                    <i class="fas fa-edit"></i>
                  </button>
                  <button class="icon-button delete-button">
                    <i class="fas fa-times"></i>
                  </button>
                </td>
              </tr>
              <tr>
                <td><input type="checkbox" /></td>
                <td>KH002</td>
                <td>Trần Văn B</td> 
                <td>TK002</td>
                <td>1</td>
                <td>45 Nguyễn Huệ, Quận 1, TP.HCM</td>
                <td>0902345678</td>
                <td>
                  <button class="icon-button edit-button">
                    <i class="fas fa-edit"></i>
                  </button>
                  <button class="icon-button delete-button">
                    <i class="fas fa-times"></i>
                  </button>
                </td>
              </tr>
              <tr>
                <td><input type="checkbox" /></td>
                <td>KH003</td>
                <td>Lê Thị C</td> 
                <td>TK003</td>
                <td>0</td>
                <td>78 Điện Biên Phủ, Quận Bình Thạnh, TP.HCM</td>
                <td>0903456789</td>
                <td>
                  <button class="icon-button edit-button">
                    <i class="fas fa-edit"></i>
                  </button>
                  <button class="icon-button delete-button">
                    <i class="fas fa-times"></i>
                  </button>
                </td>
              </tr>
              <tr>
                <td><input type="checkbox" /></td>
                <td>KH004</td>
                <td>Phạm Minh D</td> 
                <td>TK004</td>
                <td>1</td>
                <td>100 Trần Hưng Đạo, Quận 5, TP.HCM</td>
                <td>0904567890</td>
                <td>
                  <button class="icon-button edit-button">
                    <i class="fas fa-edit"></i>
                  </button>
                  <button class="icon-button delete-button">
                    <i class="fas fa-times"></i>
                  </button>
                </td>
              </tr>
              <tr>
                <td><input type="checkbox" /></td>
                <td>KH005</td>
                <td>Hồ Ngọc E</td> 
                <td>TK005</td>
                <td>0</td>
                <td>200 Cống Quỳnh, Quận Tân Bình, TP.HCM</td>
                <td>0905678901</td>
                <td>
                  <button class="icon-button edit-button">
                    <i class="fas fa-edit"></i>
                  </button>
                  <button class="icon-button delete-button">
                    <i class="fas fa-times"></i>
                  </button>
                </td>
              </tr>
              <tr>
                <td><input type="checkbox" /></td>
                <td>KH006</td>
                <td>Bùi Văn F</td> 
                <td>TK006</td>
                <td>1</td>
                <td>50 Phan Xích Long, Quận Phú Nhuận, TP.HCM</td>
                <td>0906789012</td>
                <td>
                  <button class="icon-button edit-button">
                    <i class="fas fa-edit"></i>
                  </button>
                  <button class="icon-button delete-button">
                    <i class="fas fa-times"></i>
                  </button>
                </td>
              </tr>
              <tr>
                <td><input type="checkbox" /></td>
                <td>KH007</td>
                <td>Bùi Thị G</td> 
                <td>TK007</td>
                <td>0</td>
                <td>30 Nguyễn Trí Phương, Quận 10, TP.HCM</td>
                <td>0907890123</td>
                <td>
                  <button class="icon-button edit-button">
                    <i class="fas fa-edit"></i>
                  </button>
                  <button class="icon-button delete-button">
                    <i class="fas fa-times"></i>
                  </button>
                </td>
              </tr>
              <tr>
                <td><input type="checkbox" /></td>
                <td>KH008</td>
                <td>Huỳnh Long H</td> 
                <td>TK008</td>
                <td>1</td>
                <td>150 Nguyễn Trãi, Quận 1, TP.HCM</td>
                <td>0908901234</td>
                <td>
                  <button class="icon-button edit-button">
                    <i class="fas fa-edit"></i>
                  </button>
                  <button class="icon-button delete-button">
                    <i class="fas fa-times"></i>
                  </button>
                </td>
              </tr>
              <tr>
                <td><input type="checkbox" /></td>
                  <td>KH009</td>
                  <td>Cao Thị I</td> 
                  <td>TK009</td>
                  <td>0</td>
                  <td>60 Đinh Tiên Hoàng, Quận 1, TP.HCM</td>
                  <td>0909012345</td>
                <td>
                  <button class="icon-button edit-button">
                    <i class="fas fa-edit"></i>
                  </button>
                  <button class="icon-button delete-button">
                    <i class="fas fa-times"></i>
                  </button>
                </td>
              </tr>
              <tr>
                <td><input type="checkbox" /></td>
                  <td>KH010</td>
                  <td>Trương Đình K</td> 
                  <td>TK010</td>
                  <td>1</td>
                  <td>90 Pasteur, Quận 3, TP.HCM</td>
                  <td>0910123456</td>
                <td>
                  <button class="icon-button edit-button">
                    <i class="fas fa-edit"></i>
                  </button>
                  <button class="icon-button delete-button">
                    <i class="fas fa-times"></i>
                  </button>
                </td>
              </tr>
              <tr>
                <td><input type="checkbox" /></td>
                  <td>KH011</td>
                  <td>Nguyễn Hữu L</td> 
                  <td>TK011</td>
                  <td>1</td>
                  <td>112 Vĩnh Lợi, Quận 3, TP.HCM</td>
                  <td>0911234567</td>
                <td>
                  <button class="icon-button edit-button">
                    <i class="fas fa-edit"></i>
                  </button>
                  <button class="icon-button delete-button">
                    <i class="fas fa-times"></i>
                  </button>
                </td>
              </tr>
              <tr>
                <td><input type="checkbox" /></td>
                  <td>KH012</td>
                  <td>Phan Thị M</td> 
                  <td>TK012</td>
                  <td>0</td>
                  <td>234 Lý Tự Trọng, Quận 1, TP.HCM</td>
                  <td>0912345678</td>
                <td>
                  <button class="icon-button edit-button">
                    <i class="fas fa-edit"></i>
                  </button>
                  <button class="icon-button delete-button">
                    <i class="fas fa-times"></i>
                  </button>
                </td>
              </tr>
              <tr>
                <td><input type="checkbox" /></td>
                  <td>KH013</td>
                  <td>Vũ Văn N</td> 
                  <td>TK013</td>
                  <td>1</td>
                  <td>567 Trường Chinh, Tân Bình, TP.HCM</td>
                  <td>0913456789</td>
                <td>
                  <button class="icon-button edit-button">
                    <i class="fas fa-edit"></i>
                  </button>
                  <button class="icon-button delete-button">
                    <i class="fas fa-times"></i>
                  </button>
                </td>
              </tr>
              <tr>
                <td><input type="checkbox" /></td>
                  <td>KH014</td>
                  <td>Đoàn Thị O</td> 
                  <td>TK014</td>
                  <td>0</td>
                  <td>890 Đinh Tiên Hoàng, Phú Nhuận, TP.HCM</td>
                  <td>0914567890</td>
                <td>
                  <button class="icon-button edit-button">
                    <i class="fas fa-edit"></i>
                  </button>
                  <button class="icon-button delete-button">
                    <i class="fas fa-times"></i>
                  </button>
                </td>
              </tr>
              <tr>
                <td><input type="checkbox" /></td>
                  <td>KH015</td>
                  <td>Lương Mạnh P</td> 
                  <td>TK015</td>
                  <td>1</td>
                  <td>12 Nguyễn Du, Quận 1, TP.HCM</td>
                  <td>0915678901</td>
                <td>
                  <button class="icon-button edit-button">
                    <i class="fas fa-edit"></i>
                  </button>
                  <button class="icon-button delete-button">
                    <i class="fas fa-times"></i>
                  </button>
                </td>
              </tr>
            </tbody>
          </table>

          <div class="pagination">
            <span><i class="fas fa-angle-double-left"></i></span>
            <span><i class="fas fa-angle-left"></i></span>
            <span
              >Trang <input type="number" value="1" class="page-input" /> /
              10</span
            >
            <span><i class="fas fa-angle-right"></i></span>
            <span><i class="fas fa-angle-double-right"></i></span>
          </div>
        </div>
      </div>
    </div>

    <!-- POPUP DÙNG CHUNG -->
    <div class="modal-overlay" id="modal">
      <div class="modal-box">
        <h2 id="popup-title">THÊM MỚI THÔNG TIN KHÁCH HÀNG</h2>

        <label for="makh">Mã khách hàng</label>
        <input id="makh" type="text" placeholder="Nhập mã khách hàng">

        <label for="ten">Tên khách hàng</label>
        <input id="ten" type="text" placeholder="Nhập tên khách hàng">

        <label for="matk">Mã tài khoản</label>
        <input id="matk" type="text" placeholder="Nhập mã tài khoản">

        <label for="gt">Giới tính</label>
        <select id="gt" name="gioitinh">
          <option value="" disabled selected>--Chọn giới tính--</option>
          <option value="1">Nam</option>
          <option value="0">Nữ</option>
        </select>

        <label for="diachi">Địa chỉ</label>
        <input id="diachi" type="text" placeholder="Nhập địa chỉ">

        <label for="sdt">Số điện thoại</label>
        <input id="sdt" type="text" placeholder="Nhập số điện thoại">

        <div class="modal-actions">
                <button class="cancel-btn" onclick="closeModal()" aria-label="Hủy">Hủy</button>
                <button class="save-btn" id="save-btn" aria-label="Lưu thông tin khách hàng">Lưu</button>
            </div>
      </div>
    </div>

    <script>
      // Mở form thêm mới
      document.querySelector(".add-button").addEventListener("click", function () {
        openModal("THÊM MỚI THÔNG TIN KHÁCH HÀNG", "", "", "", "", "", "");
      });

      // Mở form chỉnh sửa
      function openModal(title, makh, ten, matk, gt, diachi, sdt) {
        document.getElementById("popup-title").innerText = title;
        document.getElementById("makh").value = makh;
        document.getElementById("ten").value = ten;
        document.getElementById("matk").value = matk;
        document.getElementById("gt").value = gt;
        document.getElementById("diachi").value = diachi;
        document.getElementById("sdt").value = sdt;
        document.getElementById("modal").style.display = "flex";
      }
      // Hàm đóng popup
      function closeModal() {
        document.getElementById("modal").style.display = "none";
      }
      
      // Gắn sự kiện cho tất cả nút chỉnh sửa
      document.querySelectorAll(".edit-button").forEach(button => {
        button.addEventListener("click", function () {
          // Lấy hàng chứa nút được click
          const row = this.closest("tr");
          const makh = row.children[1].innerText;
          const ten = row.children[2].innerText;
          const matk = row.children[3].innerText;
          const gt = row.children[4].innerText;
          const diachi = row.children[5].innerText;
          const sdt = row.children[6].innerText;

      // Hiển thị popup với dữ liệu từ hàng được chọn
      openModal("CHỈNH SỬA THÔNG TIN KHÁCH HÀNG", makh, ten, matk, gt, diachi, sdt);
    });
  });

      // Lưu thông tin khách hàng
        document.querySelector(".save-btn").addEventListener("click", function () {
            const matk = document.getElementById("makh").value;
            const ten = document.getElementById("ten").value;
            const makh = document.getElementById("matk").value;
            const gt = document.getElementById("gt").value;
            const diachi = document.getElementById("diachi").value;
            const sdt = document.getElementById("sdt").value;
            if (!makh || !ten || !matk || !gt || !diachi || !sdt) {
                alert("Vui lòng điền đầy đủ thông tin!");
                return;
            }
            const btn = document.getElementById("save-btn");
            btn.disabled = true;
            btn.textContent = "Đang lưu...";

            // API call
            setTimeout(() => {
                alert("Thông tin khách hàng đã được lưu!");
                btn.disabled = false;
                btn.textContent = "Lưu";
                closeModal();
            }, 1000);
        });
    </script>

  <!-- Xóa thông tin khách hàng -->
    <div id="cancel-popup" class="popup-overlay">
        <div class="popup-box">
            <div class="popup-header">XÓA THÔNG TIN KHÁCH HÀNG</div>
            <div class="popup-body">
                <div class="popup-content">
                    <img src="https://png.pngtree.com/png-vector/20230314/ourmid/pngtree-hazard-icon-vector-png-image_6647993.png" class="warning-icon" alt="Warning">
                    <p>Bạn có chắc chắn muốn xóa thông tin khách hàng đã chọn?</p>
                </div>
                <div class="popup-actions">
                    <button class="btn btn-confirm" aria-label="Xác nhận xóa thông tin khách hàng">Xóa</button>
                    <button class="btn btn-cancel" aria-label="Hủy xóa thông tin khách hàng">Hủy</button>
                </div>
            </div>
        </div>
    </div>
    
    <script>
      // Gắn sự kiện click cho tất cả nút delete
      document.querySelectorAll(".delete-button").forEach(button => {
        button.addEventListener("click", () => {
          showDeletePopup();
        });
      });
    </script>

    <script>
    // hiển thị popup xác nhận khi người dùng nhấn nút xóa
    const popup = document.getElementById("cancel-popup");
    const cancelBtn = document.querySelector(".btn-cancel");
    const confirmBtn = document.querySelector(".btn-confirm");

     function showDeletePopup() {
        popup.style.display = "flex";
     }

  cancelBtn.addEventListener("click", () => popup.style.display = "none");
  confirmBtn.addEventListener("click", () => {
    popup.style.display = "none";
    alert("Đã xóa thông tin khách hàng!");
  });
    </script>

  </body>
</html>
